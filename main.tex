\documentclass[UTF8]{ctexbook}
\usepackage{polyglossia}
\usepackage{tipa}
\usepackage{multicol}
\usepackage{multirow} 
\usepackage{mdframed}

\usepackage{tikz}
\usetikzlibrary{3d, arrows.meta} % 屈折变化太多了，不用3D真不行

\setotherlanguages{arabic}
\setotherlanguages{english}

\newfontfamily\arabicfont[Script=Arabic]{MicrosoftSansSerif}
% \newfontfamily\arabicfontit[Script=Arabic]{ZapfinoArabic-Regular}
% \newfontfamily\arabicfontit[Script=Arabic]{ArefRuqaa-Regular}
\newfontfamily\arabicfontit[Script=Arabic]{Rakkas-Regular}
\newfontfamily\arabicfontbf[Script=Arabic]{DiwanKufi}

\newbool{innote}
\setbool{innote}{false}

\newenvironment{note}{
        \booltrue{innote}  
        \itshape
        \begin{mdframed}   
    }{
        \boolfalse{innote} 
        \end{mdframed}
    }


\newcommand{\arm}[1]{%
    \ifbool{innote}
        {\textarabic{\arabicfontit{#1}}}  % 在 note 环境中使用斜体
        {\textarabic{#1}}                 % 其他环境使用正常字体
} % 正文中夹杂阿语
% \newcommand{\arm}[1]{\textarabic{#1}}
\newcommand{\ait}[1]{\arabicfontit{#1}}
\newcommand{\abf}[1]{\arabicfontbf{#1}}
\newcommand{\ac}[2]{#2 \hspace*{\stretch{1}} \arm{\Large #1}}

\newcommand{\lecon}[1]{\fbox{P#1}} % 对应视频课程P数
\newcommand{\crm}[1]{\textenglish{#1}} % 阿语环境中夹杂中文

% 表示变化方向的箭头，有两种方向
%TODO: 统一成一个？
\newcommand{\cto}{$\rightarrow $ }
\newcommand{\ato}{$\leftarrow $ }

\title{\arm{\Huge \arabicfontbf{اَللُّغَةُ الْعَرَبِيَّةُ}} \\ 阿拉伯语笔记}
\author{}
\date{\today}
\begin{document}
\maketitle

\input{preface.tex}

\input{ch1.tex}
\input{lecon8.1.tex}
\input{lecon9.1.tex}
\input{lecon10.1.tex}
\input{lecon11.tex}
\input{lecon12.tex}

\end{document}